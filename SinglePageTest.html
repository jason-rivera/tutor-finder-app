<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>TEMPLATE</title>
        <meta name="comp1800 boilerplate code" content="my bcit project">
        <meta name="author" content="BCIT">

        <!-- Bootstrap for Mobile-first, and JQuery -->
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

        <!-- Firebase CSS for Authentication UI -->
        <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.css" />

        <!-- Optional CSS of your own -->
        <!-- <link type="text/css" rel="stylesheet" href=".css" /> -->
    </head>

    <body>
        <!-------------------------------------->
        <!-- The following is HTML for layout -->
        <!-------------------------------------->

        <div id="collapseableSearch">
            <div class="jumbotron">
                <h4>Search for a Tutor</h4>
            </div>

            <div class="body-container">
                <h6>Choose Subject(s):</h6>


                <div class="button-cont">
                    <div class="ck-button">
                        <label>
                        <input type="checkbox" id="Math"><span>Math</span>
                        </label>
                    </div>
            
                    <div class="ck-button">
                        <label>
                        <input type="checkbox" id="English"><span>English</span>
                        </label>
                    </div>
            
                    <div class="ck-button">
                        <label>
                        <input type="checkbox" id="Spanish"><span>Spanish</span>
                        </label>
                    </div>
            
                    <div class="ck-button">
                    <label>
                        <input type="checkbox" id="Biology"><span>Biology</span>
                    </label>
                    </div>
            
                    <div class="ck-button">
                    <label>
                        <input type="checkbox" id="Physics"><span>Physics</span>
                    </label>
                    </div>
            
                    <div class="ck-button">
                    <label>
                        <input type="checkbox" id="Chemistry"><span>Chemistry</span>
                    </label>
                    </div>
            
                    <div class="ck-button">
                    <label>
                        <input type="checkbox" id="Geography"><span>Geography</span>
                    </label>
                    </div>
            
                    <div class="ck-button">
                    <label>
                        <input type="checkbox" id="French"><span>French</span>
                    </label>
                    </div>

                    <div class="ck-button">
                        <label>
                            <input type="checkbox" id="History"><span>History</span>
                        </label>
                    </div>

                    <div class="ck-button">
                        <label>
                            <input type="checkbox" id="Programming"><span>Programming</span>
                        </label>
                    </div>
                    <br>
                </div>
                <br><br><br>
                
                <input class="form-control form-control" type="search" placeholder="Type a specific subject" style="width: 100%">
                <br/>


                <div class="form-group row min-max">
                    <div class="form-group col-md-2">
                    <label for="min-text">Min $</label>
                    <input type="text" class="form-control" id="min-text" style="width: 100px">
                    </div>
                    <div class="form-group col-md-2">
                    <label for="max-text">Max $</label>
                    <input type="text" class="form-control" id="max-text" style="width: 100px">
                    </div>
                </div>

                <div class="filter-text"><h6>Your Location:</h6></div>

                <select class="form-control">
                <option>Default (Any)</option>
                <option>Vancouver</option>
                <option>Toronto</option>
                <option>Montreal</option>
                </select>
                <br/>

                <div class="filter-text"><h6>Years of Experience:</h6></div>
                <select class="form-control">
                <option>Default (Any)</option>
                <option>1-2 years</option>
                <option>2-4 years</option>
                <option>5+ years</option>
                </select>


                <!-- <div class="progress">
                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 75%">Search Optimized 75%</div>
                </div> -->

                <br>
                <button class="btn btn-primary my-2 my-sm-0 find-button" role="button" id="submit">Find Tutor <i class="fas fa-search"></i></button>

                <br/>
                <br/>
                <br/>

            </div>
        </div>  


        <!----------------------------------------------->
        <!--    JS: Boostrap, Firebase, API related    -->
        <!----------------------------------------------->
        <!-- Bootstrap libraries from CDN -->
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
        </script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
        </script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
        </script>

        <!-- Firebase libraries from CDN -->
        <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-auth.js"></script>
        <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-firestore.js"></script>

        <!-- Your own Firebase API key information -->
        <script src="scripts/firebase_api_team24.js"> </script>

        <!--------------------------------------------------------------------->
        <!--      JS files: Your own JavaScript functions included here      -->
        <!--------------------------------------------------------------------->
        <!-- Header Navigation Bar -->
        <script> var navBarCommonName={name: "TEMPLATE" }; </script>
        <script src="scripts/navbar-common.js"> ;</script>


        <script>
            $(document).ready(function() {
                $('#submit').click(function() {

                    $('#collapseableSearch').addClass('collapse');
                    
                    var subjectsSearch = new Array;
                    
                    if (document.getElementById("Math").checked) {
                        subjectsSearch.push("math");
                    }
                    if (document.getElementById("English").checked) {
                        subjectsSearch.push("english");
                    }
                    if (document.getElementById("Spanish").checked) {
                        subjectsSearch.push("spanish");
                    }
                    if (document.getElementById("Biology").checked) {
                        subjectsSearch.push("biology");
                    }
                    if (document.getElementById("Physics").checked) {
                        subjectsSearch.push("physics");
                    }
                    if (document.getElementById("Chemistry").checked) {
                        subjectsSearch.push("chemistry");
                    }
                    if (document.getElementById("Geography").checked) {
                        subjectsSearch.push("geography");
                    }
                    if (document.getElementById("French").checked) {
                        subjectsSearch.push("french");
                    }
                    if (document.getElementById("Programming").checked) {
                        subjectsSearch.push("programming");
                    }
                    if (document.getElementById("History").checked) {
                        subjectsSearch.push("history");
                    }
                    
                    
                    db.collection("TutorsTEST").where("subjects", "array-contains-any", subjectsSearch).where()
                        .get()
                        .then(function(querySnapshot) {
                            querySnapshot.forEach(function(doc) {
                                // doc.data() is never undefined for query doc snapshots
                                
                                $("body").append(
                                    '<div class="jumbotron">'+
                                        '<h1 class="tutor-title">'+doc.data().name+'</h1>'+
                                        '<div class="grid-2x1">'+
                                            '<div class="profile_pic">'+
                                                '<img src="images/profile_pic2.jpg" class="img-thumbnail" alt="thumbnail">'+
                                            '</div>'+
                                            '<div class="grid-1x2">'+
                                                '<div class="pair-container">'+
                                                    '<img src="images/star.svg.png" class="rating-star" alt="star">'+
                                                    '<p class="rating-value">4.6</p>'+
                                                '</div>'+
                                                '<div class="pair-container">'+
                                                    '<h4>Rate:</h4>'+
                                                    '<p class="rate-value">'+doc.data().rate+'</p>'+
                                                '</div>'+
                                            '</div>'+
                                        '</div>'+
                                        '<hr class="my-4">'+
                                        '<div class="subject-container">'+
                                            '<h4>Subjects:</h4>'+
                                        '</div>'+
                                        '<hr class="my-4">'+
                                        '<a class="btn btn-primary btn-lg" id="button'+doc.data().tutorID+'" onClick="ScheduleModal(this.id)" href="#" role="button">Learn more</a>'+
                                    '</div>'
                                    
                                );
                                

                                console.log(doc.id, " => ", doc.data());
                            });
                        })
                        .catch(function(error) {
                            console.log("Error getting documents: ", error);
                        });
                    
                        
                    
                    
                    
                        
                    
                    
                    
                    
                    //window.location.href='results_copy.html';
                });
            });
            
            
        </script>

    </body>
</html>